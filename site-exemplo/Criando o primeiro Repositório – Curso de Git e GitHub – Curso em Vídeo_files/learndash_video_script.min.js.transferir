function LearnDash_watchPlayers(){setInterval(function(){if(ld_video_state=document.hasFocus()?"focus":"blur",0!==Object.keys(ld_video_players).length)for(var e in ld_video_players)if(ld_video_players.hasOwnProperty(e)&&(ld_video_player=ld_video_players[e],void 0!==ld_video_player.player)){if("1"===learndash_video_data.video_track_time)if("youtube"===ld_video_player.player_type){var a=ld_video_player.player.getCurrentTime();"1"===learndash_video_data.video_debug&&console.log("YOUTUBE: seconds[%o]",a),LearnDash_Video_Progress_setSetting(ld_video_player,"video_time",a)}else if("vimeo"===ld_video_player.player_type)ld_video_player.player.getCurrentTime().then(function(e){"1"===learndash_video_data.video_debug&&console.log("VIMEO: seconds[%o]",e),LearnDash_Video_Progress_setSetting(ld_video_player,"video_time",e)});else if("wistia"===ld_video_player.player_type){var d=ld_video_player.player.time();"1"===learndash_video_data.video_debug&&console.log("WISTIA: video user_time: [%o]",d),LearnDash_Video_Progress_setSetting(ld_video_player,"video_time",d)}else if("local"===ld_video_player.player_type){var o=ld_video_player.player.currentTime;"1"===learndash_video_data.video_debug&&console.log("LOCAL: user_video_time: [%o]",o),LearnDash_Video_Progress_setSetting(ld_video_player,"video_time",o)}"1"===learndash_video_data.video_focus_pause&&("youtube"==ld_video_player.player_type?"focus"===ld_video_state?1!=learndash_video_data.videos_show_controls&&("1"!==learndash_video_data.video_debug&&console.log("YOUTUBE: Focus: calling playVideo()"),ld_video_player.player.playVideo()):"blur"===ld_video_state&&("1"===learndash_video_data.video_debug&&console.log("YOUTUBE: Blur: calling pauseVideo()"),ld_video_player.player.pauseVideo()):"vimeo"===ld_video_player.player_type?"focus"===ld_video_state?1!=learndash_video_data.videos_show_controls&&("1"===learndash_video_data.video_debug&&console.log("VIMEO: Focus: calling playVideo()"),ld_video_player.player.play()):"blur"===ld_video_state&&("1"===learndash_video_data.video_debug&&console.log("VIMEO: Blur: calling pauseVideo()"),ld_video_player.player.pause()):"wistia"===ld_video_player.player_type?"focus"===ld_video_state?learndash_video_data.videos_show_controls:"blur"===ld_video_state&&("1"===learndash_video_data.video_debug&&console.log("WISTIA: Blur: calling pause()"),ld_video_player.player.pause()):"local"===ld_video_player.player_type&&("focus"===ld_video_state?1!=learndash_video_data.videos_show_controls&&("1"===learndash_video_data.video_debug&&console.log("LOCAL: Focus: calling playVideo()"),ld_video_player.player.play()):"blur"===ld_video_state&&("1"===learndash_video_data.video_debug&&console.log("LOCAL: Blur: calling pauseVideo()"),ld_video_player.player.pause())))}},ld_video_watch_interval)}function LearnDash_disable_assets(e){if(jQuery("form.sfwd-mark-complete input.learndash_mark_complete_button").length&&(1==learndash_video_data.videos_hide_complete_button?jQuery("form.sfwd-mark-complete input.learndash_mark_complete_button").hide():jQuery("form.sfwd-mark-complete input.learndash_mark_complete_button").attr("disabled",e),1==learndash_video_data.videos_auto_complete&&0==e)){var a=parseInt(learndash_video_data.videos_auto_complete_delay);if(a>0){if(""!=learndash_video_data.videos_auto_complete_delay_message)var d=jQuery(learndash_video_data.videos_auto_complete_delay_message).insertAfter("form.sfwd-mark-complete input.learndash_mark_complete_button");var o=a;timer_id=setInterval(function(){o--,o<1?(clearInterval(timer_id),jQuery("form.sfwd-mark-complete")[0].submit()):void 0!==d&&jQuery("span",d).html(o)},1e3)}else jQuery("form.sfwd-mark-complete")[0].submit()}"BEFORE"==learndash_video_data.videos_shown&&(1==e?(jQuery("#learndash_lesson_topics_list").hide(),jQuery("#learndash_quizzes").hide()):(jQuery("#learndash_lesson_topics_list").slideDown(),jQuery("#learndash_quizzes").slideDown())),jQuery(document).trigger("learndash_video_disable_assets",[e])}function LearnDash_Video_Progress_getCookie(e,a){if(""!=e)return cookie_values=Cookies.get(e,{expires:learndash_video_data.video_track_expires,domain:learndash_video_data.video_track_domain}),"undefined"==typeof cookie_values?void 0!==a&&(cookie_values=a):""!==cookie_values&&(cookie_values=JSON.parse(cookie_values)),cookie_values}function LearnDash_Video_Progress_setCookie(e,a){""!=e&&void 0!==a&&("1"===learndash_video_data.video_debug&&console.log("video_track_expires[%o]",Number(learndash_video_data.video_track_expires)),Cookies.set(e,JSON.stringify(a),{expires:Number(learndash_video_data.video_track_expires),domain:learndash_video_data.video_track_domain,path:learndash_video_data.video_track_path}))}function LearnDash_Video_Progress_deleteCookie(e){""!=e&&Cookies.remove(e)}function LearnDash_Video_Progress_initSettings(e){if(void 0!==e&&void 0!==e.player_cookie_key&&""!==e.player_cookie_key){cookie_values=LearnDash_Video_Progress_getCookie(e.player_cookie_key,{});var a=!1;return void 0===cookie_values.video_time&&(cookie_values.video_time=0,a=!0),void 0===cookie_values.video_state&&(cookie_values.video_state="",a=!0),1==a&&LearnDash_Video_Progress_setCookie(e.player_cookie_key,cookie_values),cookie_values}}function LearnDash_Video_Progress_setSetting(e,a,d){if(void 0!==e&&void 0!==e.player_cookie_key&&""!==e.player_cookie_key){cookie_values=LearnDash_Video_Progress_getCookie(e.player_cookie_key,{});var o=!1;void 0!==cookie_values[a]&&cookie_values[a]===d||(cookie_values[a]=d,o=!0),1==o&&LearnDash_Video_Progress_setCookie(e.player_cookie_key,cookie_values)}}function LearnDash_Video_Progress_getSetting(e,a){if(void 0!==e&&void 0!==e.player_cookie_key&&""!==e.player_cookie_key&&(cookie_values=LearnDash_Video_Progress_getCookie(e.player_cookie_key,{}),void 0!==cookie_values[a]))return cookie_values[a]}function LearnDash_get_player_from_target(e){if(void 0!==e&&0!==Object.keys(ld_video_players).length)for(var a in ld_video_players)if(ld_video_players.hasOwnProperty(a)&&(ld_video_player=ld_video_players[a],ld_video_player.player===e))return ld_video_player}if("undefined"!=typeof learndash_video_data){void 0===learndash_video_data.video_debug&&(learndash_video_data.video_debug="1"),"1"===learndash_video_data.video_debug&&console.log("DEBUG: learndash_video_data[%o]",learndash_video_data);var ld_video_players={},ld_video_state=!1,ld_video_watch_interval=2500;if("youtube"==learndash_video_data.videos_found_provider){function onYouTubeIframeAPIReady(){document.querySelectorAll('.ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] iframe, .ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] iframe').length&&("1"===learndash_video_data.video_debug&&console.log("YOUTUBE: calling LearnDash_disable_assets(true)"),LearnDash_disable_assets(!0),LearnDash_watchPlayers(),document.querySelectorAll('.ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] iframe, .ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] video').forEach(function(e,a){"1"===learndash_video_data.video_debug&&console.log("YOUTUBE: index[%o] element[%o]",a,e);var d="ld-video-player-"+a,o=e.getAttribute("id");void 0!==o&&null!=o&&""!=o||(o=d,e.setAttribute("id",o)),e.setAttribute("data-learndash-video",d),ld_video_players[d]={},ld_video_players[d].player_key=d,ld_video_players[d].player_type=learndash_video_data.videos_found_provider,ld_video_players[d].player_id=o,ld_video_players[d].player_wrapper=e.closest(".ld-video"),void 0!==ld_video_players[d].player_wrapper?ld_video_players[d].player_cookie_key=ld_video_players[d].player_wrapper.getAttribute("data-video-cookie-key"):ld_video_players[d].player_cookie_key="",ld_video_players[d].player_cookie_values=LearnDash_Video_Progress_initSettings(ld_video_players[d]),ld_video_players[d].player=new YT.Player(o,{events:{onReady:LearnDash_YT_onPlayerReady,onStateChange:LearnDash_YT_onPlayerStateChange}})}))}function LearnDash_YT_onPlayerReady(e){"1"===learndash_video_data.video_debug&&console.log("YOUTUBE: in LearnDash_YT_onPlayerReady: event.target[%o]",e.target);var a=LearnDash_get_player_from_target(e.target);if("1"===learndash_video_data.video_track_time){var d=LearnDash_Video_Progress_getSetting(a,"video_time");void 0===d&&(d=0),"1"===learndash_video_data.video_debug&&console.log("YOUTUBE: in LearnDash_YT_onPlayerReady: start user_video_time: [%o]",d),e.target.seekTo(d)}1==learndash_video_data.videos_auto_start?("1"===learndash_video_data.video_debug&&console.log("YOUTUBE: in LearnDash_YT_onPlayerReady: autostart enabled: calling playVideo()"),e.target.playVideo()):("1"===learndash_video_data.video_debug&&console.log("YOUTUBE: in LearnDash_YT_onPlayerReady: calling pauseVideo()"),e.target.pauseVideo())}function LearnDash_YT_onPlayerStateChange(e){"1"===learndash_video_data.video_debug&&console.log("YOUTUBE: event.target[%o]",e.target);var a=LearnDash_get_player_from_target(e.target),d=e.target.getPlayerState();d==YT.PlayerState.UNSTARTED||(d==YT.PlayerState.ENDED?("1"===learndash_video_data.video_debug&&console.log("YOUTUBE: Video has ended[%o]",d),"1"===learndash_video_data.video_debug&&console.log("YOUTUBE: calling LearnDash_disable_assets(false)"),LearnDash_disable_assets(!1)):d==YT.PlayerState.PLAYING?("1"===learndash_video_data.video_debug&&console.log("YOUTUBE: Video is playing"),LearnDash_Video_Progress_setSetting(a,"video_state","played")):d==YT.PlayerState.PAUSED?("1"===learndash_video_data.video_debug&&console.log("YOUTUBE: Video is paused"),LearnDash_Video_Progress_setSetting(a,"video_state","paused")):d==YT.PlayerState.BUFFERING||YT.PlayerState.CUED)}}else"vimeo"==learndash_video_data.videos_found_provider?jQuery(document).ready(function(){"1"===learndash_video_data.video_debug&&console.log("VIMEO: init"),"undefined"==typeof Vimeo?"1"===learndash_video_data.video_debug&&console.log("VIMEO: Error: Vimeo element not found. This is need for the video API."):"1"===learndash_video_data.video_debug&&console.log("VIMEO: Vimeo element found"),document.querySelectorAll('.ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] iframe, .ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] video').length&&("1"===learndash_video_data.video_debug&&console.log("VIMEO: calling LearnDash_disable_assets(true)"),LearnDash_disable_assets(!0),LearnDash_watchPlayers(),document.querySelectorAll('.ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] iframe, .ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] video').forEach(function(e,a){var d="ld-video-player-"+a,o=e.getAttribute("id");void 0!==o&&""!=o||(o=d,e.setAttribute("id",o)),e.setAttribute("data-learndash-video",d),ld_video_players[d]={},ld_video_players[d].player_key=d,ld_video_players[d].player_type=learndash_video_data.videos_found_provider,ld_video_players[d].player_id=o,ld_video_players[d].player_wrapper=e.closest(".ld-video"),void 0!==ld_video_players[d].player_wrapper?ld_video_players[d].player_cookie_key=ld_video_players[d].player_wrapper.getAttribute("data-video-cookie-key"):ld_video_players[d].player_cookie_key="",ld_video_players[d].player_cookie_values=LearnDash_Video_Progress_initSettings(ld_video_players[d]),ld_video_players[d].player=new Vimeo.Player(e),void 0!==ld_video_players[d]&&("1"===learndash_video_data.video_debug&&console.log("VIMEO: player[%o]",ld_video_players[d]),ld_video_players[d].player.ready().then(function(){if("1"===learndash_video_data.video_debug&&(console.log("VIMEO: ready video!"),console.log("VIMEO: element_key[%o] ld_video_players[%o]",d,ld_video_players)),"1"===learndash_video_data.video_track_time){var e=LearnDash_Video_Progress_getSetting(ld_video_players[d],"video_time");void 0===e&&(e=0),"1"===learndash_video_data.video_debug&&console.log("VIMEO: start user_minutes: [%o]",e),ld_video_players[d].player.setCurrentTime(e)}1==learndash_video_data.videos_auto_start&&("1"===learndash_video_data.video_debug&&(console.log("VIMEO: auto_start enabled."),console.log("VIMEO: calling video play()")),ld_video_players[d].player.play())}),ld_video_players[d].player.on("play",function(e){"1"===learndash_video_data.video_debug&&console.log("VIMEO: playing the video.")}),ld_video_players[d].player.on("pause",function(e){"1"===learndash_video_data.video_debug&&console.log("VIMEO: paused the video.")}),ld_video_players[d].player.on("ended",function(e){"1"===learndash_video_data.video_debug&&console.log("VIMEO: calling LearnDash_disable_assets(false)"),LearnDash_disable_assets(!1)}))}))}):"wistia"==learndash_video_data.videos_found_provider?jQuery(document).ready(function(e){"1"===learndash_video_data.video_debug&&console.log("WISTIA: init"),document.querySelectorAll('.ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] iframe, .ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] video').length&&("1"===learndash_video_data.video_debug&&console.log("WISTIA: calling LearnDash_disable_assets(true)"),LearnDash_disable_assets(!0),LearnDash_watchPlayers(),window._wq=window._wq||[],document.querySelectorAll('.ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] iframe, .ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] video').forEach(function(e,a){var d="ld-video-player-"+a,o=e.getAttribute("data-learndash-video-wistia-id");void 0!==o&&""!=o||(o=d,e.setAttribute("id",o)),e.setAttribute("data-learndash-video",d),ld_video_players[d]={},ld_video_players[d].player_key=d,ld_video_players[d].player_type=learndash_video_data.videos_found_provider,ld_video_players[d].player_id=o,ld_video_players[d].player_wrapper=e.closest(".ld-video"),void 0!==ld_video_players[d].player_wrapper?ld_video_players[d].player_cookie_key=ld_video_players[d].player_wrapper.getAttribute("data-video-cookie-key"):ld_video_players[d].player_cookie_key="",ld_video_players[d].player_cookie_values=LearnDash_Video_Progress_initSettings(ld_video_players[d]),_wq.push({id:o,onReady:function(e){if(ld_video_players[d].player=e,"1"===learndash_video_data.video_debug&&console.log("WISTIA: in onReady video[%o]",e),ld_video_players[d].player.bind("play",function(){"1"===learndash_video_data.video_debug&&console.log("WISTIA: video started event")}),ld_video_players[d].player.bind("pause",function(){"1"===learndash_video_data.video_debug&&console.log("WISTIA: video paused event")}),ld_video_players[d].player.bind("end",function(){return"1"===learndash_video_data.video_debug&&console.log("WISTIA: video ended event"),"1"===learndash_video_data.video_debug&&console.log("WISTIA: calling LearnDash_disable_assets(false)"),LearnDash_disable_assets(!1),e.unbind}),"1"===learndash_video_data.video_track_time){var a=LearnDash_Video_Progress_getSetting(ld_video_players[d],"video_time");void 0===a&&(a=0),"1"===learndash_video_data.video_debug&&console.log("WISTIA: start user_minutes: [%o]",a),e.time(a)}1==learndash_video_data.videos_auto_start&&("1"===learndash_video_data.video_debug&&console.log("WISTIA: auto-start enabled: calling video.play()"),e.play())}})}))}):"vooplayer"==learndash_video_data.videos_found_provider?jQuery(document).ready(function(e){if("1"===learndash_video_data.video_debug&&console.log("VOOPLAYER: init"),"undefined"!=typeof vooAPI){function a(e){"1"===learndash_video_data.video_debug&&console.log("VOOPLAYER: vooPlayerReady [%o]",e),void 0!==e.detail.video&&e.detail.video.length>0&&vooAPI(e.detail.video,"onEnded",null,d)}function d(){"1"===learndash_video_data.video_debug&&console.log("VOOPLAYER: calling LearnDash_disable_assets(false)"),LearnDash_disable_assets(!1)}"1"===learndash_video_data.video_debug&&console.log("VOOPLAYER: calling LearnDash_disable_assets(true)"),LearnDash_disable_assets(!0),LearnDash_watchPlayers(),document.addEventListener("vooPlayerReady",a,!1)}}):"local"==learndash_video_data.videos_found_provider&&jQuery(document).ready(function(e){"1"===learndash_video_data.video_debug&&console.log("LOCAL: init"),document.querySelectorAll('.ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] iframe, .ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] video').length&&("1"===learndash_video_data.video_debug&&console.log("LOCAL: calling LearnDash_disable_assets(true)"),LearnDash_disable_assets(!0),LearnDash_watchPlayers(),document.querySelectorAll('.ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] iframe, .ld-video[data-video-progression="true"][data-video-provider="'+learndash_video_data.videos_found_provider+'"] video').forEach(function(e,a){var d="ld-video-player-"+a,o=e.getAttribute("id");if(void 0!==o&&""!=o||(o=d,e.setAttribute("id",o)),e.setAttribute("data-learndash-video",d),ld_video_players[d]={},ld_video_players[d].player_key=d,ld_video_players[d].player_type=learndash_video_data.videos_found_provider,ld_video_players[d].player_id=o,ld_video_players[d].player_wrapper=e.closest(".ld-video"),void 0!==ld_video_players[d].player_wrapper?ld_video_players[d].player_cookie_key=ld_video_players[d].player_wrapper.getAttribute("data-video-cookie-key"):ld_video_players[d].player_cookie_key="",ld_video_players[d].player_cookie_values=LearnDash_Video_Progress_initSettings(ld_video_players[d]),ld_video_players[d].player=e,"1"===learndash_video_data.video_track_time){var _=LearnDash_Video_Progress_getSetting(ld_video_players[d],"video_time");void 0===_&&(_=0),"1"===learndash_video_data.video_debug&&console.log("LOCAL: start user_minutes: [%o]",_),ld_video_players[d].player.currentTime=_}"1"===learndash_video_data.videos_auto_start&&("1"===learndash_video_data.video_debug&&console.log("LOCAL: playing video"),ld_video_players[d].player.play()),ld_video_players[d].player.onended=function(e){"1"===learndash_video_data.video_debug&&console.log("LOCAL: video ended"),"1"===learndash_video_data.video_debug&&console.log("LOCAL: calling LearnDash_disable_assets(false)"),LearnDash_disable_assets(!1)}}))})}